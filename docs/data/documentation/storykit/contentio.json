{"abstract":[{"text":"Load, compile, and serve story content and text.","type":"text"}],"hierarchy":{"paths":[["doc:\/\/StoryKit\/documentation\/StoryKit"]]},"schemaVersion":{"minor":3,"major":0,"patch":0},"sections":[],"identifier":{"url":"doc:\/\/StoryKit\/documentation\/StoryKit\/ContentIO","interfaceLanguage":"swift"},"metadata":{"roleHeading":"Article","title":"Content I\/O","role":"article","modules":[{"name":"StoryKit"}]},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/storykit\/contentio"]}],"kind":"article","primaryContentSections":[{"content":[{"level":2,"anchor":"Overview","text":"Overview","type":"heading"},{"inlineContent":[{"type":"text","text":"StoryKit handles authoring and runtime content formats, text parsing, and compiled bundle manifests."}],"type":"paragraph"},{"level":2,"anchor":"Layouts-and-Loaders","text":"Layouts and Loaders","type":"heading"},{"items":[{"content":[{"inlineContent":[{"type":"reference","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StorySourceLayout","isActive":true},{"type":"text","text":": Describes a source folder with "},{"type":"codeVoice","code":"story.json"},{"type":"text","text":" and "},{"type":"codeVoice","code":"texts\/"},{"type":"text","text":"."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryBundleLayout","type":"reference"},{"text":": Describes a compiled ","type":"text"},{"code":".storybundle","type":"codeVoice"},{"text":" directory.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryLoader","type":"reference","isActive":true},{"type":"text","text":": Loads a "},{"identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/Story","type":"reference","isActive":true},{"type":"text","text":" from a "},{"type":"codeVoice","code":"story.json"},{"type":"text","text":" file."}]}]},{"content":[{"inlineContent":[{"type":"reference","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryBundleLoader","isActive":true},{"text":": Loads a ","type":"text"},{"type":"reference","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/Story","isActive":true},{"text":" from a bundle’s ","type":"text"},{"type":"codeVoice","code":"graph.json"},{"text":".","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"level":2,"text":"Compiler and Manifest","type":"heading","anchor":"Compiler-and-Manifest"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryCompiler"},{"type":"text","text":": Compiles a source folder into a bundle."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryBundleManifest","isActive":true,"type":"reference"},{"text":": Records schema version, story metadata, build time, and the SHA‑256 hash of ","type":"text"},{"code":"graph.json","type":"codeVoice"},{"text":".","type":"text"}]}]}]},{"level":2,"text":"Markdown Text","type":"heading","anchor":"Markdown-Text"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/TextSectionParser","isActive":true},{"type":"text","text":": Splits Markdown files into named sections using lines of the form "},{"type":"codeVoice","code":"=== node: <section-id> ==="},{"type":"text","text":"."}]}]}]},{"text":"Text Providers","anchor":"Text-Providers","type":"heading","level":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/SourceTextProvider","isActive":true},{"type":"text","text":" and "},{"type":"reference","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/BundleTextProvider","isActive":true},{"type":"text","text":": Minimal providers that parse a file on each request."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/CachedSourceTextProvider","type":"reference","isActive":true},{"type":"text","text":" and "},{"identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/CachedBundleTextProvider","type":"reference","isActive":true},{"type":"text","text":": Actor‑based providers with LRU caches and memory‑pressure purging."}]}]}]},{"inlineContent":[{"text":"Both cached providers accept a ","type":"text"},{"type":"codeVoice","code":"maxBytes"},{"text":" budget and evict least‑recently‑used files when the cache exceeds this size. Memory pressure notifications trigger a full purge.","type":"text"}],"type":"paragraph"},{"text":"Errors","anchor":"Errors","type":"heading","level":2},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryIOError","type":"reference","isActive":true},{"type":"text","text":": Throws when a requested text section is missing."}]}]}]}],"kind":"content"}],"references":{"doc://StoryKit/documentation/StoryKit/CachedBundleTextProvider":{"identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/CachedBundleTextProvider","title":"CachedBundleTextProvider","navigatorTitle":[{"text":"CachedBundleTextProvider","kind":"identifier"}],"abstract":[{"type":"text","text":"An actor-based provider that caches parsed bundle files with LRU eviction and memory pressure purge."}],"type":"topic","kind":"symbol","role":"symbol","fragments":[{"text":"actor","kind":"keyword"},{"text":" ","kind":"text"},{"text":"CachedBundleTextProvider","kind":"identifier"}],"url":"\/documentation\/storykit\/cachedbundletextprovider"},"doc://StoryKit/documentation/StoryKit/StoryBundleManifest":{"url":"\/documentation\/storykit\/storybundlemanifest","type":"topic","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"StoryBundleManifest","kind":"identifier"}],"role":"symbol","kind":"symbol","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryBundleManifest","title":"StoryBundleManifest","abstract":[{"text":"Metadata describing a compiled story bundle.","type":"text"}],"navigatorTitle":[{"text":"StoryBundleManifest","kind":"identifier"}]},"doc://StoryKit/documentation/StoryKit/StoryLoader":{"abstract":[{"type":"text","text":"Loads a Story from a "},{"type":"codeVoice","code":"story.json"},{"type":"text","text":" file."}],"kind":"symbol","title":"StoryLoader","type":"topic","role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"StoryLoader","kind":"identifier"}],"url":"\/documentation\/storykit\/storyloader","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryLoader","navigatorTitle":[{"kind":"identifier","text":"StoryLoader"}]},"doc://StoryKit/documentation/StoryKit/CachedSourceTextProvider":{"title":"CachedSourceTextProvider","url":"\/documentation\/storykit\/cachedsourcetextprovider","role":"symbol","type":"topic","navigatorTitle":[{"text":"CachedSourceTextProvider","kind":"identifier"}],"kind":"symbol","fragments":[{"text":"actor","kind":"keyword"},{"kind":"text","text":" "},{"text":"CachedSourceTextProvider","kind":"identifier"}],"identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/CachedSourceTextProvider","abstract":[{"text":"An actor-based provider that caches parsed source files with LRU eviction and memory pressure purge.","type":"text"}]},"doc://StoryKit/documentation/StoryKit/StoryBundleLoader":{"kind":"symbol","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"StoryBundleLoader"}],"abstract":[{"type":"text","text":"Loads a Story from a compiled bundle’s "},{"code":"graph.json","type":"codeVoice"},{"type":"text","text":" file."}],"navigatorTitle":[{"kind":"identifier","text":"StoryBundleLoader"}],"role":"symbol","title":"StoryBundleLoader","url":"\/documentation\/storykit\/storybundleloader","type":"topic","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryBundleLoader"},"doc://StoryKit/documentation/StoryKit":{"url":"\/documentation\/storykit","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit","type":"topic","kind":"symbol","abstract":[{"type":"text","text":"Build rich, data‑driven “choose your own adventure” experiences with a small, composable core and first‑class tooling."}],"title":"StoryKit","role":"collection"},"doc://StoryKit/documentation/StoryKit/StoryBundleLayout":{"kind":"symbol","title":"StoryBundleLayout","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"StoryBundleLayout"}],"role":"symbol","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryBundleLayout","navigatorTitle":[{"kind":"identifier","text":"StoryBundleLayout"}],"url":"\/documentation\/storykit\/storybundlelayout","type":"topic","abstract":[{"type":"text","text":"Describes the on-disk layout for a compiled directory-based story bundle."}]},"doc://StoryKit/documentation/StoryKit/BundleTextProvider":{"url":"\/documentation\/storykit\/bundletextprovider","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"BundleTextProvider"}],"navigatorTitle":[{"kind":"identifier","text":"BundleTextProvider"}],"abstract":[{"text":"A simple text provider for compiled bundles that parses each request.","type":"text"}],"type":"topic","title":"BundleTextProvider","role":"symbol","kind":"symbol","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/BundleTextProvider"},"doc://StoryKit/documentation/StoryKit/StoryIOError":{"abstract":[{"type":"text","text":"Errors thrown while loading Markdown text or locating sections."}],"kind":"symbol","title":"StoryIOError","type":"topic","role":"symbol","fragments":[{"kind":"keyword","text":"enum"},{"text":" ","kind":"text"},{"text":"StoryIOError","kind":"identifier"}],"url":"\/documentation\/storykit\/storyioerror","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryIOError","navigatorTitle":[{"text":"StoryIOError","kind":"identifier"}]},"doc://StoryKit/documentation/StoryKit/StorySourceLayout":{"navigatorTitle":[{"kind":"identifier","text":"StorySourceLayout"}],"url":"\/documentation\/storykit\/storysourcelayout","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"StorySourceLayout"}],"type":"topic","abstract":[{"text":"Describes the on-disk layout for a human-authored story source.","type":"text"}],"identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StorySourceLayout","kind":"symbol","role":"symbol","title":"StorySourceLayout"},"doc://StoryKit/documentation/StoryKit/SourceTextProvider":{"navigatorTitle":[{"kind":"identifier","text":"SourceTextProvider"}],"url":"\/documentation\/storykit\/sourcetextprovider","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"SourceTextProvider"}],"type":"topic","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/SourceTextProvider","abstract":[{"type":"text","text":"A simple text provider that parses the source file each time."}],"kind":"symbol","role":"symbol","title":"SourceTextProvider"},"doc://StoryKit/documentation/StoryKit/TextSectionParser":{"title":"TextSectionParser","url":"\/documentation\/storykit\/textsectionparser","role":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"TextSectionParser"}],"kind":"symbol","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"TextSectionParser"}],"identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/TextSectionParser","abstract":[{"type":"text","text":"Parses Markdown files that contain multiple node sections separated by a special token."},{"type":"text","text":" "},{"type":"text","text":"Token format (at start of line):"},{"type":"text","text":" "},{"type":"text","text":"=== node: "},{"type":"text","text":" ==="},{"type":"text","text":" "},{"type":"text","text":"Splits Markdown into labeled sections using lines like "},{"type":"codeVoice","code":"=== node: <section-id> ==="},{"type":"text","text":"."}]},"doc://StoryKit/documentation/StoryKit/Story":{"navigatorTitle":[{"kind":"identifier","text":"Story"}],"url":"\/documentation\/storykit\/story","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Story","kind":"identifier"}],"type":"topic","abstract":[{"text":"A complete story graph plus metadata and a starting node.","type":"text"}],"identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/Story","kind":"symbol","role":"symbol","title":"Story"},"doc://StoryKit/documentation/StoryKit/StoryCompiler":{"navigatorTitle":[{"text":"StoryCompiler","kind":"identifier"}],"url":"\/documentation\/storykit\/storycompiler","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"text":"StoryCompiler","kind":"identifier"}],"type":"topic","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryCompiler","abstract":[{"type":"text","text":"Compiles a source folder into a directory-based bundle for runtime use."}],"kind":"symbol","role":"symbol","title":"StoryCompiler"}}}