{"hierarchy":{"paths":[["doc:\/\/StoryKit\/documentation\/StoryKit"]]},"metadata":{"roleHeading":"Class","title":"StoryEngine","modules":[{"name":"StoryKit"}],"symbolKind":"class","role":"symbol","fragments":[{"text":"actor","kind":"keyword"},{"text":" ","kind":"text"},{"text":"StoryEngine","kind":"identifier"}],"navigatorTitle":[{"text":"StoryEngine","kind":"identifier"}],"externalID":"s:8StoryKit0A6EngineC"},"primaryContentSections":[{"kind":"declarations","declarations":[{"platforms":["macOS"],"languages":["swift"],"tokens":[{"text":"actor","kind":"keyword"},{"text":" ","kind":"text"},{"text":"StoryEngine","kind":"identifier"},{"text":"<","kind":"text"},{"text":"State","kind":"genericParameter"},{"text":"> ","kind":"text"},{"text":"where","kind":"keyword"},{"text":" ","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":" : ","kind":"text"},{"text":"StoryState","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryState","kind":"typeIdentifier","preciseIdentifier":"s:8StoryKit0A5StateP"}]}]},{"kind":"mentions","mentions":["doc:\/\/StoryKit\/documentation\/StoryKit\/Engine","doc:\/\/StoryKit\/documentation\/StoryKit\/Persistence"]},{"content":[{"level":2,"anchor":"overview","type":"heading","text":"Overview"},{"inlineContent":[{"text":"The engine evaluates predicates for available choices, applies effects on selection,","type":"text"},{"text":" ","type":"text"},{"text":"transitions to destination nodes, applies on-enter effects, and invokes an optional autosave handler.","type":"text"}],"type":"paragraph"}],"kind":"content"}],"schemaVersion":{"minor":3,"patch":0,"major":0},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/storykit\/storyengine"]}],"identifier":{"url":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine","interfaceLanguage":"swift"},"kind":"symbol","sections":[],"topicSections":[{"generated":true,"identifiers":["doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/init(story:initialState:predicateRegistry:effectRegistry:actionRegistry:autosave:)"],"title":"Initializers","anchor":"Initializers"},{"generated":true,"identifiers":["doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/actionRegistry","doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/effectRegistry","doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/predicateRegistry","doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/state","doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/story"],"title":"Instance Properties","anchor":"Instance-Properties"},{"generated":true,"identifiers":["doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/applyOnEnterEffectsIfAny()","doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/availableChoices()","doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/currentNode()","doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/performAction(id:parameters:)","doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/performGlobalAction(id:)","doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/select(choiceID:)"],"title":"Instance Methods","anchor":"Instance-Methods"},{"generated":true,"identifiers":["doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/AutoSaveHandler"],"title":"Type Aliases","anchor":"Type-Aliases"},{"generated":true,"identifiers":["doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/Actor-Implementations"],"title":"Default Implementations","anchor":"Default-Implementations"}],"relationshipsSections":[{"type":"conformsTo","identifiers":["doc:\/\/StoryKit\/s8SendableP","doc:\/\/StoryKit\/s16SendableMetatypeP","doc:\/\/StoryKit\/ScA"],"kind":"relationships","title":"Conforms To"}],"abstract":[{"text":"An actor that executes story flow for a given story and app-defined state.","type":"text"}],"references":{"doc://StoryKit/documentation/StoryKit/StoryEngine/story":{"identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/story","role":"symbol","abstract":[{"text":"The story being executed.","type":"text"}],"title":"story","type":"topic","fragments":[{"text":"let","kind":"keyword"},{"kind":"text","text":" "},{"text":"story","kind":"identifier"},{"text":": ","kind":"text"},{"text":"Story","preciseIdentifier":"s:8StoryKit0A0V","kind":"typeIdentifier"}],"url":"\/documentation\/storykit\/storyengine\/story","kind":"symbol"},"doc://StoryKit/documentation/StoryKit/Persistence":{"title":"Persistence","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/Persistence","url":"\/documentation\/storykit\/persistence","kind":"article","role":"article","abstract":[{"text":"Save and load story state with pluggable backends.","type":"text"}],"type":"topic"},"doc://StoryKit/documentation/StoryKit/StoryEngine/performAction(id:parameters:)":{"title":"performAction(id:parameters:)","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"performAction","kind":"identifier"},{"text":"(","kind":"text"},{"text":"id","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"text":", ","kind":"text"},{"text":"parameters","kind":"externalParam"},{"text":": [","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"text":" : ","kind":"text"},{"text":"String","kind":"typeIdentifier","preciseIdentifier":"s:SS"},{"text":"]) ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"text":"throws","kind":"keyword"},{"text":" -> ","kind":"text"},{"text":"ActionOutcome","kind":"typeIdentifier","preciseIdentifier":"s:8StoryKit13ActionOutcomeO"},{"text":"?","kind":"text"}],"url":"\/documentation\/storykit\/storyengine\/performaction(id:parameters:)","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/performAction(id:parameters:)","kind":"symbol","role":"symbol","abstract":[],"type":"topic"},"doc://StoryKit/documentation/StoryKit/StoryState":{"type":"topic","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryState","title":"StoryState","fragments":[{"text":"protocol","kind":"keyword"},{"kind":"text","text":" "},{"text":"StoryState","kind":"identifier"}],"url":"\/documentation\/storykit\/storystate","kind":"symbol","role":"symbol","navigatorTitle":[{"text":"StoryState","kind":"identifier"}],"abstract":[{"type":"text","text":"App-defined, codable story state used by the engine."}]},"doc://StoryKit/s16SendableMetatypeP":{"type":"unresolvable","title":"Swift.SendableMetatype","identifier":"doc:\/\/StoryKit\/s16SendableMetatypeP"},"doc://StoryKit/documentation/StoryKit/StoryEngine/init(story:initialState:predicateRegistry:effectRegistry:actionRegistry:autosave:)":{"url":"\/documentation\/storykit\/storyengine\/init(story:initialstate:predicateregistry:effectregistry:actionregistry:autosave:)","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/init(story:initialState:predicateRegistry:effectRegistry:actionRegistry:autosave:)","type":"topic","role":"symbol","abstract":[{"type":"text","text":"Creates a new engine instance."}],"title":"init(story:initialState:predicateRegistry:effectRegistry:actionRegistry:autosave:)","kind":"symbol","fragments":[{"text":"init","kind":"identifier"},{"text":"(","kind":"text"},{"text":"story","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Story","kind":"typeIdentifier","preciseIdentifier":"s:8StoryKit0A0V"},{"text":", ","kind":"text"},{"text":"initialState","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"predicateRegistry","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"PredicateRegistry","kind":"typeIdentifier","preciseIdentifier":"s:8StoryKit17PredicateRegistryV"},{"text":"<","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":">, ","kind":"text"},{"text":"effectRegistry","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"EffectRegistry","kind":"typeIdentifier","preciseIdentifier":"s:8StoryKit14EffectRegistryV"},{"text":"<","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":">, ","kind":"text"},{"text":"actionRegistry","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"ActionRegistry","kind":"typeIdentifier","preciseIdentifier":"s:8StoryKit14ActionRegistryV"},{"text":"<","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":">, ","kind":"text"},{"text":"autosave","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"StoryEngine","kind":"typeIdentifier","preciseIdentifier":"s:8StoryKit0A6EngineC"},{"text":"<","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":">.","kind":"text"},{"text":"AutoSaveHandler","kind":"typeIdentifier","preciseIdentifier":"s:8StoryKit0A6EngineC15AutoSaveHandlera"},{"text":"?)","kind":"text"}]},"doc://StoryKit/documentation/StoryKit/StoryEngine":{"url":"\/documentation\/storykit\/storyengine","kind":"symbol","type":"topic","title":"StoryEngine","fragments":[{"text":"actor","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"StoryEngine"}],"navigatorTitle":[{"text":"StoryEngine","kind":"identifier"}],"identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine","role":"symbol","abstract":[{"text":"An actor that executes story flow for a given story and app-defined state.","type":"text"}]},"doc://StoryKit/documentation/StoryKit/StoryEngine/predicateRegistry":{"title":"predicateRegistry","abstract":[{"type":"text","text":"Registry of predicate closures used to gate choices."}],"fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"predicateRegistry","kind":"identifier"},{"text":": ","kind":"text"},{"text":"PredicateRegistry","preciseIdentifier":"s:8StoryKit17PredicateRegistryV","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":">","kind":"text"}],"identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/predicateRegistry","url":"\/documentation\/storykit\/storyengine\/predicateregistry","kind":"symbol","role":"symbol","type":"topic"},"doc://StoryKit/s8SendableP":{"type":"unresolvable","identifier":"doc:\/\/StoryKit\/s8SendableP","title":"Swift.Sendable"},"doc://StoryKit/documentation/StoryKit/StoryEngine/effectRegistry":{"title":"effectRegistry","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"effectRegistry","kind":"identifier"},{"text":": ","kind":"text"},{"text":"EffectRegistry","kind":"typeIdentifier","preciseIdentifier":"s:8StoryKit14EffectRegistryV"},{"text":"<","kind":"text"},{"text":"State","kind":"typeIdentifier"},{"text":">","kind":"text"}],"url":"\/documentation\/storykit\/storyengine\/effectregistry","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/effectRegistry","kind":"symbol","role":"symbol","type":"topic","abstract":[{"type":"text","text":"Registry of effect closures used to mutate state."}]},"doc://StoryKit/documentation/StoryKit/StoryEngine/select(choiceID:)":{"url":"\/documentation\/storykit\/storyengine\/select(choiceid:)","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/select(choiceID:)","type":"topic","role":"symbol","abstract":[],"title":"select(choiceID:)","kind":"symbol","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"select"},{"kind":"text","text":"("},{"kind":"externalParam","text":"choiceID"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:8StoryKit8ChoiceIDV","text":"ChoiceID"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:8StoryKit6NodeIDV","text":"NodeID"}]},"doc://StoryKit/documentation/StoryKit/StoryEngine/AutoSaveHandler":{"url":"\/documentation\/storykit\/storyengine\/autosavehandler","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/AutoSaveHandler","type":"topic","role":"symbol","abstract":[{"type":"text","text":"An optional autosave handler invoked after transitions and actions."}],"title":"StoryEngine.AutoSaveHandler","navigatorTitle":[{"kind":"identifier","text":"AutoSaveHandler"}],"kind":"symbol","fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"AutoSaveHandler"}]},"doc://StoryKit/documentation/StoryKit/StoryEngine/performGlobalAction(id:)":{"title":"performGlobalAction(id:)","abstract":[],"fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"performGlobalAction","kind":"identifier"},{"text":"(","kind":"text"},{"text":"id","kind":"externalParam"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:SS","text":"String","kind":"typeIdentifier"},{"text":") ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"text":"throws","kind":"keyword"},{"text":" -> ","kind":"text"},{"preciseIdentifier":"s:8StoryKit6NodeIDV","text":"NodeID","kind":"typeIdentifier"}],"identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/performGlobalAction(id:)","url":"\/documentation\/storykit\/storyengine\/performglobalaction(id:)","kind":"symbol","role":"symbol","type":"topic"},"doc://StoryKit/documentation/StoryKit/StoryEngine/actionRegistry":{"title":"actionRegistry","abstract":[{"type":"text","text":"Registry of action closures for richer interactions."}],"fragments":[{"kind":"keyword","text":"var"},{"text":" ","kind":"text"},{"text":"actionRegistry","kind":"identifier"},{"text":": ","kind":"text"},{"kind":"typeIdentifier","text":"ActionRegistry","preciseIdentifier":"s:8StoryKit14ActionRegistryV"},{"kind":"text","text":"<"},{"text":"State","kind":"typeIdentifier"},{"kind":"text","text":">"}],"identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/actionRegistry","url":"\/documentation\/storykit\/storyengine\/actionregistry","kind":"symbol","role":"symbol","type":"topic"},"doc://StoryKit/documentation/StoryKit/StoryEngine/availableChoices()":{"type":"topic","kind":"symbol","title":"availableChoices()","url":"\/documentation\/storykit\/storyengine\/availablechoices()","abstract":[{"text":"Returns choices that are currently available based on predicate evaluation.","type":"text"}],"role":"symbol","fragments":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"kind":"identifier","text":"availableChoices"},{"kind":"text","text":"() -> ["},{"preciseIdentifier":"s:8StoryKit6ChoiceV","kind":"typeIdentifier","text":"Choice"},{"kind":"text","text":"]"}],"identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/availableChoices()"},"doc://StoryKit/documentation/StoryKit/StoryEngine/currentNode()":{"title":"currentNode()","abstract":[{"type":"text","text":"Returns the current node, if present."}],"fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"currentNode"},{"kind":"text","text":"() -> "},{"kind":"typeIdentifier","text":"Node","preciseIdentifier":"s:8StoryKit4NodeV"},{"kind":"text","text":"?"}],"identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/currentNode()","url":"\/documentation\/storykit\/storyengine\/currentnode()","kind":"symbol","role":"symbol","type":"topic"},"doc://StoryKit/documentation/StoryKit/StoryEngine/Actor-Implementations":{"type":"topic","url":"\/documentation\/storykit\/storyengine\/actor-implementations","title":"Actor Implementations","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/Actor-Implementations","kind":"article","role":"collectionGroup","abstract":[]},"doc://StoryKit/documentation/StoryKit/StoryEngine/applyOnEnterEffectsIfAny()":{"type":"topic","url":"\/documentation\/storykit\/storyengine\/applyonentereffectsifany()","title":"applyOnEnterEffectsIfAny()","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/applyOnEnterEffectsIfAny()","kind":"symbol","role":"symbol","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"applyOnEnterEffectsIfAny"},{"kind":"text","text":"()"}],"abstract":[{"type":"text","text":"Applies the on-enter effects for the current node, if any."}]},"doc://StoryKit/documentation/StoryKit/StoryEngine/state":{"abstract":[{"type":"text","text":"The current state, isolated to the engine actor."}],"kind":"symbol","url":"\/documentation\/storykit\/storyengine\/state","title":"state","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/StoryEngine\/state","fragments":[{"text":"var","kind":"keyword"},{"kind":"text","text":" "},{"text":"state","kind":"identifier"},{"text":": ","kind":"text"},{"text":"State","kind":"typeIdentifier"}],"type":"topic","role":"symbol"},"doc://StoryKit/ScA":{"title":"_Concurrency.Actor","identifier":"doc:\/\/StoryKit\/ScA","type":"unresolvable"},"doc://StoryKit/documentation/StoryKit":{"role":"collection","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit","type":"topic","abstract":[{"text":"Build rich, data‑driven “choose your own adventure” experiences with a small, composable core and first‑class tooling.","type":"text"}],"title":"StoryKit","kind":"symbol","url":"\/documentation\/storykit"},"doc://StoryKit/documentation/StoryKit/Engine":{"url":"\/documentation\/storykit\/engine","kind":"article","type":"topic","title":"Engine","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit\/Engine","role":"article","abstract":[{"text":"Drive the story forward with the actor‑based runtime.","type":"text"}]}}}