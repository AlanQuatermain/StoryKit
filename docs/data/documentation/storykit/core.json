{"kind":"article","abstract":[{"type":"text","text":"Understand StoryKit’s core data model and identifiers."}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/StoryKit\/documentation\/StoryKit\/Core"},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/storykit\/core"]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"primaryContentSections":[{"kind":"content","content":[{"text":"Overview","level":2,"type":"heading","anchor":"Overview"},{"inlineContent":[{"type":"text","text":"The Core module defines the schema for stories and the foundational types used across the package. It is deliberately small and "},{"type":"codeVoice","code":"Sendable"},{"type":"text","text":" to support safe use with Swift Concurrency."}],"type":"paragraph"},{"type":"heading","level":3,"text":"Identifiers","anchor":"Identifiers"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"Core\/NodeID"},{"type":"text","text":": Strongly‑typed identifier for nodes."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"Core\/ChoiceID"},{"type":"text","text":": Strongly‑typed identifier for choices."}],"type":"paragraph"}]}]},{"inlineContent":[{"text":"Both wrap ","type":"text"},{"code":"String","type":"codeVoice"},{"text":" and conform to ","type":"text"},{"code":"Codable","type":"codeVoice"},{"type":"text","text":", "},{"type":"codeVoice","code":"Hashable"},{"type":"text","text":", and "},{"type":"codeVoice","code":"Sendable"},{"text":".","type":"text"}],"type":"paragraph"},{"text":"Content References","anchor":"Content-References","type":"heading","level":3},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"code":"Core\/TextRef","type":"codeVoice"},{"text":": Points to the prose for a node via ","type":"text"},{"type":"codeVoice","code":"file"},{"type":"text","text":" (Markdown filename) and "},{"type":"codeVoice","code":"section"},{"type":"text","text":" (a labeled region within the file)."}]}]}],"type":"unorderedList"},{"level":3,"type":"heading","anchor":"Story-Graph","text":"Story Graph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"Core\/Choice"},{"type":"text","text":": A labeled edge from one node to another with optional predicates and effects."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"Core\/Node"},{"type":"text","text":": A story node with text reference, optional tags, on‑enter effects, and a list of choices."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"Core\/Story"},{"type":"text","text":": Aggregates metadata, the "},{"type":"codeVoice","code":"start"},{"text":" node, and the ","type":"text"},{"type":"codeVoice","code":"nodes"},{"type":"text","text":" map."}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"Core\/Story"},{"text":" encodes\/decodes its ","type":"text"},{"type":"codeVoice","code":"nodes"},{"text":" as a string‑keyed dictionary for authoring convenience while presenting a ","type":"text"},{"type":"codeVoice","code":"[NodeID: Node]"},{"text":" API within Swift.","type":"text"}]},{"type":"heading","level":3,"text":"Extensibility Descriptors","anchor":"Extensibility-Descriptors"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"Core\/PredicateDescriptor"},{"type":"text","text":" and "},{"type":"codeVoice","code":"Core\/EffectDescriptor"},{"text":": Data‑only descriptors with an ","type":"text"},{"type":"codeVoice","code":"id"},{"type":"text","text":" and string parameters, used to bind to runtime logic registered by the host app."}]}]}]},{"level":3,"type":"heading","anchor":"Registries-and-State","text":"Registries and State"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"Core\/StoryState"},{"type":"text","text":": Protocol for app‑defined, "},{"type":"codeVoice","code":"Codable"},{"type":"text","text":" and "},{"code":"Sendable","type":"codeVoice"},{"text":" story state. Must include a ","type":"text"},{"type":"codeVoice","code":"currentNode"},{"text":".","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"Core\/PredicateRegistry"},{"text":": Maps predicate ids to ","type":"text"},{"type":"codeVoice","code":"@Sendable"},{"text":" evaluation closures.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"Core\/EffectRegistry"},{"text":": Maps effect ids to ","type":"text"},{"type":"codeVoice","code":"@Sendable"},{"text":" mutation closures.","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"Core\/ActionRegistry"},{"text":": Maps action ids to ","type":"text"},{"type":"codeVoice","code":"@Sendable"},{"text":" closures that can throw and return an ","type":"text"},{"type":"codeVoice","code":"Core\/ActionOutcome"},{"text":".","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"Core\/ActionOutcome"},{"text":": Indicates action completion or requests host interaction.","type":"text"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"text":"All registries are value types and store ","type":"text"},{"type":"codeVoice","code":"@Sendable"},{"text":" closures to be safe across concurrency domains.","type":"text"}]}]}],"hierarchy":{"paths":[["doc:\/\/StoryKit\/documentation\/StoryKit"]]},"metadata":{"modules":[{"name":"StoryKit"}],"role":"article","roleHeading":"Article","title":"Core"},"references":{"doc://StoryKit/documentation/StoryKit":{"role":"collection","kind":"symbol","title":"StoryKit","type":"topic","url":"\/documentation\/storykit","identifier":"doc:\/\/StoryKit\/documentation\/StoryKit","abstract":[{"text":"Build rich, data‑driven “choose your own adventure” experiences with a small, composable core and first‑class tooling.","type":"text"}]}}}